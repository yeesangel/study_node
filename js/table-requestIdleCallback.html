<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>渲染table测试</title>
<style type="text/css">
*{
margin: 0px;
padding: 0px;
}
.container{
width: 1000px;
margin: 0px auto;
font-size: 14px;
text-align: center;
color: #000;
}
table{
border-spacing: 0px;
width: 100%;
line-height: 1.5em;
}
</style>
</head>
<body>
<div id="box" class="container"></div>
<script type="text/javascript">

var aa;

window.onload = function() {
  const boxDom = document.getElementById('box');
  const cTable = document.createElement('table');
  let index = 0;// 单元格索引，从0开始
  // 这次我们分5步来完成上面的任务，其实也可以分更多步
  const oneStepNum = 4000;
  let currentStep = 1;
  const renderTable = function renderTable() {
    for(let i = 0; i < oneStepNum; i++) {
      const tr = document.createElement('tr');
      for(let j = 0; j < 6; j++) {
        const td = document.createElement('td');
        td.innerHTML = index;
        tr.appendChild(td);
        index++;
      }
      cTable.appendChild(tr);
    }
    if(!aa) {
      aa = true;
      boxDom.appendChild(cTable);
    }
    currentStep++;
    console.log(currentStep);
    if(currentStep > 5) {
      clearTimeout(timer);
      return;
    }
    var timer = queueMicrotask(renderTable);
  };
  renderTable();// 渲染dom
};
</script>
</body>
</html>