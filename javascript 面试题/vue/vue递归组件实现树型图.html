<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>树形结构2</title>
    <script src="./vue-2.5.1.js"></script>
</head>
<style>
    *{
        padding: 0;
        margin: 0;
    }
    li {
        list-style: none;
        padding-left: 14px;
    }
</style>
<body>
    <div id = "app">
        <tree :folder = "trees" :select = "select"></tree>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script>
        Vue.component('tree', {
            name:"tree",
            template:`<ul>
                        <li v-for = "item in folder">
                            <span @click = "select(item)">{{ item.label }}</span>
                            <tree v-if="!item.show"  :folder = "item.children" :select = "select"></tree>
                        </li>
                    </ul>`,
            props:["folder","select"],
            methods:{

            }
        })
        // <tree v-if = "item.children" :folder = "item.children"></tree>
        var app = new Vue({
            el:"#app",
            data:{
                msg:"hello world",
                trees: [
                    {
                        id:1,
                        label:"1级目录1",
                        show:false,
                        children:[
                            {
                                id:"1-1",
                                label:"1.1目录"
                            },
                            {
                                id:"1-2",
                                label:"1.2目录"
                            },
                            {
                                id:"1-3",
                                label:"1.3目录"
                            },
                        ]
                    },
                    {
                        id:2,
                        label:"1级目录2",
                        show:false
                    },
                    {
                        id:3,
                        label:"1级目录3",
                        show:false,
                        children:[
                            {
                                id:"3-1",
                                label:"3.1目录"
                            },
                            {
                                id:"3-2",
                                label:"3.2目录",
                                show:false,
                                children:[
                                    {
                                        id:"3-2-1",
                                        label:"3.2.1目录"
                                    },
                                    {
                                        id:"3-2-2",
                                        label:"3.2.2目录"
                                    },
                                    {
                                        id:"3-2-3",
                                        label:"3.2.3目录"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        id:4,
                        label:"1级目录4",
                        show:false,
                        children:[
                            {
                                id:"4-1",
                                label:"4.1目录"
                            },
                            {
                                id:"4-2",
                                label:"4.2目录",
                                show:false,
                                children:[
                                    {
                                        id:"4-2-1",
                                        label:"4.2.1目录"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        id:5,
                        label:"1级目录5",
                        show:false,
                        children:[
                            {
                                id:"5-1",
                                label:"5.1目录",
                                show:false,
                                children:[
                                    {
                                        id:"5-1-1",
                                        label:"5.1.1目录"
                                    },
                                    {
                                        id:"5-1-2",
                                        label:"5.1.2目录",
                                        show:false,
                                        children:[
                                            {
                                                id:"5-1-2-1",
                                                label:"5.1.2.1目录"
                                            },
                                        ]
                                    }
                                ]
                            },
                            {
                                id:"5-2",
                                label:"5.2目录",
                                show:false
                            }
                        ]
                    },
                ]
            },
            methods:{
                clickHandler(){
                    console.log(23333);
                },
                select(data){
                    // data.show = !data.show
                    if(!data.children) return
                    this.$set(data, 'show', !data.show)
                    console.log(data)
                }
            },
            mounted(){
                console.log(this.trees);
            }
        })
    </script>
</body>
</html>